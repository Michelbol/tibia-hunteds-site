services:
  web:
    extends:
      file: ./../app_web/docker-compose.yml
      service: web
    volumes:
      - ./../../src:/var/www/html
      - ./default.conf:/etc/nginx/conf.d/default.conf
    ports:
      - "8080:80"
    logging:
      driver: journald

  app:
    extends:
      file: ./../app_web/docker-compose.yml
      service: app
    volumes:
      - ./../../src:/var/www/html
    logging:
      driver: journald

  scheduler:
    extends:
      file: ./../app_web/docker-compose.yml
      service: scheduler
    volumes:
      - ./../../src:/var/www/html
    logging:
      driver: journald

  db:
    extends:
      file: ./../db/docker-compose.yml
      service: db
    logging:
      driver: journald

  world-scrapper:
    extends:
      file: ./../scheduler/docker-compose.yml
      service: world-scraper
    volumes:
      - ./../../src:/var/www/html
    logging:
      driver: journald

networks:
  public:
  laravel:
    driver: bridge

volumes:
  dbdata: